{"version":3,"file":"DragDropFileUpload.js","names":["defaultProps","defaultPropsMap","defaultPropTypes","DragDropFileUpload","setFile","openFileBrowser","setOpenFileBrowser","draggableElement","whileDraggingElement","multipleFileUploader","whileDraggingElementClassName","mainContainerClassName","acceptableFileType","inputId","inputName","inputRef","useRef","React","useState","dragActive","setDragActive","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","files","handleChange","target","useEffect","current","click","setTimeout","cx","propTypes","PropTypes","func","bool","string"],"sources":["../../../src/components/DragDropFileUpload/DragDropFileUpload.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport defaultPropsMap from 'Constants/defaultProps';\nconst { defaultProps, defaultPropTypes } = defaultPropsMap;\n\nfunction DragDropFileUpload({\n  setFile,\n  openFileBrowser,\n  setOpenFileBrowser,\n  draggableElement,\n  whileDraggingElement,\n  multipleFileUploader,\n  whileDraggingElementClassName,\n  mainContainerClassName,\n  acceptableFileType,\n  inputId,\n  inputName\n}) {\n  const inputRef = useRef();\n\n  const [dragActive, setDragActive] = React.useState(false);\n\n  const handleDrag = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      setFile(e.dataTransfer.files);\n    }\n  };\n\n  const handleChange = function (e) {\n    e.preventDefault();\n    if (e.target.files && e.target.files[0]) {\n      setFile(e.target.files);\n    }\n  };\n\n  useEffect(() => {\n    if (openFileBrowser) {\n      inputRef.current.click();\n      setTimeout(() => {\n        setOpenFileBrowser(false);\n      }, 500);\n    }\n  }, [openFileBrowser]);\n\n  return (\n    <>\n      <div\n        className={cx('pos-rel', mainContainerClassName)}\n        onDragEnter={handleDrag}\n        onSubmit={(e) => e.preventDefault()}>\n        <input\n          ref={inputRef}\n          type=\"file\"\n          className=\"no-display\"\n          accept={acceptableFileType}\n          multiple={multipleFileUploader}\n          onChange={handleChange}\n          id={inputId}\n          name={inputName}\n        />\n        {draggableElement && draggableElement()}\n        {dragActive && (\n          <div\n            className={cx(whileDraggingElementClassName)}\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}>\n            {whileDraggingElement && whileDraggingElement()}\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nDragDropFileUpload.propTypes = {\n  ...defaultPropTypes,\n  setFile: PropTypes.func,\n  openFileBrowser: PropTypes.bool,\n  setOpenFileBrowser: PropTypes.func,\n  draggableElement: PropTypes.func,\n  whileDraggingElement: PropTypes.func,\n  multipleFileUploader: PropTypes.bool,\n  whileDraggingElementClassName: PropTypes.string,\n  mainContainerClassName: PropTypes.string,\n  acceptableFileType: PropTypes.string,\n  inputId: PropTypes.string,\n  inputName: PropTypes.string\n};\n\nDragDropFileUpload.defaultProps = {\n  ...defaultProps,\n  openFileBrowser: false,\n  acceptableFileType: '.jpg,.jpeg,.png',\n  inputId: 'draggableFileUploaderId',\n  inputName: 'file_name'\n};\n\nexport default DragDropFileUpload;\n"],"mappings":";;;;;;;;;;;;;;;AAAA;;AACA;;AACA;;AAEA;;;;;;;;;;AACA,IAAQA,YAAR,GAA2CC,wBAA3C,CAAQD,YAAR;AAAA,IAAsBE,gBAAtB,GAA2CD,wBAA3C,CAAsBC,gBAAtB;;AAEA,SAASC,kBAAT,OAYG;EAAA,IAXDC,OAWC,QAXDA,OAWC;EAAA,IAVDC,eAUC,QAVDA,eAUC;EAAA,IATDC,kBASC,QATDA,kBASC;EAAA,IARDC,gBAQC,QARDA,gBAQC;EAAA,IAPDC,oBAOC,QAPDA,oBAOC;EAAA,IANDC,oBAMC,QANDA,oBAMC;EAAA,IALDC,6BAKC,QALDA,6BAKC;EAAA,IAJDC,sBAIC,QAJDA,sBAIC;EAAA,IAHDC,kBAGC,QAHDA,kBAGC;EAAA,IAFDC,OAEC,QAFDA,OAEC;EAAA,IADDC,SACC,QADDA,SACC;EACD,IAAMC,QAAQ,GAAG,IAAAC,aAAA,GAAjB;;EAEA,sBAAoCC,iBAAA,CAAMC,QAAN,CAAe,KAAf,CAApC;EAAA;EAAA,IAAOC,UAAP;EAAA,IAAmBC,aAAnB;;EAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,CAAUC,CAAV,EAAa;IAC9BA,CAAC,CAACC,cAAF;IACAD,CAAC,CAACE,eAAF;;IACA,IAAIF,CAAC,CAACG,IAAF,KAAW,WAAX,IAA0BH,CAAC,CAACG,IAAF,KAAW,UAAzC,EAAqD;MACnDL,aAAa,CAAC,IAAD,CAAb;IACD,CAFD,MAEO,IAAIE,CAAC,CAACG,IAAF,KAAW,WAAf,EAA4B;MACjCL,aAAa,CAAC,KAAD,CAAb;IACD;EACF,CARD;;EAUA,IAAMM,UAAU,GAAG,SAAbA,UAAa,CAAUJ,CAAV,EAAa;IAC9BA,CAAC,CAACC,cAAF;IACAD,CAAC,CAACE,eAAF;IACAJ,aAAa,CAAC,KAAD,CAAb;;IACA,IAAIE,CAAC,CAACK,YAAF,CAAeC,KAAf,IAAwBN,CAAC,CAACK,YAAF,CAAeC,KAAf,CAAqB,CAArB,CAA5B,EAAqD;MACnDxB,OAAO,CAACkB,CAAC,CAACK,YAAF,CAAeC,KAAhB,CAAP;IACD;EACF,CAPD;;EASA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAUP,CAAV,EAAa;IAChCA,CAAC,CAACC,cAAF;;IACA,IAAID,CAAC,CAACQ,MAAF,CAASF,KAAT,IAAkBN,CAAC,CAACQ,MAAF,CAASF,KAAT,CAAe,CAAf,CAAtB,EAAyC;MACvCxB,OAAO,CAACkB,CAAC,CAACQ,MAAF,CAASF,KAAV,CAAP;IACD;EACF,CALD;;EAOA,IAAAG,gBAAA,EAAU,YAAM;IACd,IAAI1B,eAAJ,EAAqB;MACnBU,QAAQ,CAACiB,OAAT,CAAiBC,KAAjB;MACAC,UAAU,CAAC,YAAM;QACf5B,kBAAkB,CAAC,KAAD,CAAlB;MACD,CAFS,EAEP,GAFO,CAAV;IAGD;EACF,CAPD,EAOG,CAACD,eAAD,CAPH;EASA,oBACE,+EACE;IACE,SAAS,EAAE,IAAA8B,sBAAA,EAAG,SAAH,EAAcxB,sBAAd,CADb;IAEE,WAAW,EAAEU,UAFf;IAGE,QAAQ,EAAE,kBAACC,CAAD;MAAA,OAAOA,CAAC,CAACC,cAAF,EAAP;IAAA;EAHZ,gBAIE;IACE,GAAG,EAAER,QADP;IAEE,IAAI,EAAC,MAFP;IAGE,SAAS,EAAC,YAHZ;IAIE,MAAM,EAAEH,kBAJV;IAKE,QAAQ,EAAEH,oBALZ;IAME,QAAQ,EAAEoB,YANZ;IAOE,EAAE,EAAEhB,OAPN;IAQE,IAAI,EAAEC;EARR,EAJF,EAcGP,gBAAgB,IAAIA,gBAAgB,EAdvC,EAeGY,UAAU,iBACT;IACE,SAAS,EAAE,IAAAgB,sBAAA,EAAGzB,6BAAH,CADb;IAEE,WAAW,EAAEW,UAFf;IAGE,WAAW,EAAEA,UAHf;IAIE,UAAU,EAAEA,UAJd;IAKE,MAAM,EAAEK;EALV,GAMGlB,oBAAoB,IAAIA,oBAAoB,EAN/C,CAhBJ,CADF,CADF;AA8BD;;AAEDL,kBAAkB,CAACiC,SAAnB,mCACKlC,gBADL;EAEEE,OAAO,EAAEiC,qBAAA,CAAUC,IAFrB;EAGEjC,eAAe,EAAEgC,qBAAA,CAAUE,IAH7B;EAIEjC,kBAAkB,EAAE+B,qBAAA,CAAUC,IAJhC;EAKE/B,gBAAgB,EAAE8B,qBAAA,CAAUC,IAL9B;EAME9B,oBAAoB,EAAE6B,qBAAA,CAAUC,IANlC;EAOE7B,oBAAoB,EAAE4B,qBAAA,CAAUE,IAPlC;EAQE7B,6BAA6B,EAAE2B,qBAAA,CAAUG,MAR3C;EASE7B,sBAAsB,EAAE0B,qBAAA,CAAUG,MATpC;EAUE5B,kBAAkB,EAAEyB,qBAAA,CAAUG,MAVhC;EAWE3B,OAAO,EAAEwB,qBAAA,CAAUG,MAXrB;EAYE1B,SAAS,EAAEuB,qBAAA,CAAUG;AAZvB;AAeArC,kBAAkB,CAACH,YAAnB,mCACKA,YADL;EAEEK,eAAe,EAAE,KAFnB;EAGEO,kBAAkB,EAAE,iBAHtB;EAIEC,OAAO,EAAE,yBAJX;EAKEC,SAAS,EAAE;AALb;eAQeX,kB"}