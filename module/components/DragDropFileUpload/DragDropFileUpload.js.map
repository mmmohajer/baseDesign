{"version":3,"file":"DragDropFileUpload.js","names":["defaultProps","defaultPropsMap","defaultPropTypes","DragDropFileUpload","setFile","openFileBrowser","setOpenFileBrowser","draggableElement","whileDraggingElement","multipleFileUploader","whileDraggingElementClassName","mainContainerClassName","acceptableFileType","inputId","inputRef","useRef","React","useState","dragActive","setDragActive","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","files","handleChange","target","useEffect","current","click","setTimeout","cx","propTypes","PropTypes","func","bool","string"],"sources":["../../../src/components/DragDropFileUpload/DragDropFileUpload.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport defaultPropsMap from 'Constants/defaultProps';\nconst { defaultProps, defaultPropTypes } = defaultPropsMap;\n\nfunction DragDropFileUpload({\n  setFile,\n  openFileBrowser,\n  setOpenFileBrowser,\n  draggableElement,\n  whileDraggingElement,\n  multipleFileUploader,\n  whileDraggingElementClassName,\n  mainContainerClassName,\n  acceptableFileType,\n  inputId\n}) {\n  const inputRef = useRef();\n\n  const [dragActive, setDragActive] = React.useState(false);\n\n  const handleDrag = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      setFile(e.dataTransfer.files);\n    }\n  };\n\n  const handleChange = function (e) {\n    e.preventDefault();\n    if (e.target.files && e.target.files[0]) {\n      setFile(e.target.files);\n    }\n  };\n\n  useEffect(() => {\n    if (openFileBrowser) {\n      inputRef.current.click();\n      setTimeout(() => {\n        setOpenFileBrowser(false);\n      }, 500);\n    }\n  }, [openFileBrowser]);\n\n  return (\n    <>\n      <div\n        className={cx('pos-rel', mainContainerClassName)}\n        onDragEnter={handleDrag}\n        onSubmit={(e) => e.preventDefault()}>\n        <input\n          ref={inputRef}\n          type=\"file\"\n          className=\"no-display\"\n          accept={acceptableFileType}\n          multiple={multipleFileUploader}\n          onChange={handleChange}\n          id={inputId}\n        />\n        {draggableElement && draggableElement()}\n        {dragActive && (\n          <div\n            className={cx(whileDraggingElementClassName)}\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}>\n            {whileDraggingElement && whileDraggingElement()}\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nDragDropFileUpload.propTypes = {\n  ...defaultPropTypes,\n  setFile: PropTypes.func,\n  openFileBrowser: PropTypes.bool,\n  setOpenFileBrowser: PropTypes.func,\n  draggableElement: PropTypes.func,\n  whileDraggingElement: PropTypes.func,\n  multipleFileUploader: PropTypes.bool,\n  whileDraggingElementClassName: PropTypes.string,\n  mainContainerClassName: PropTypes.string,\n  acceptableFileType: PropTypes.string,\n  inputId: PropTypes.string\n};\n\nDragDropFileUpload.defaultProps = {\n  ...defaultProps,\n  openFileBrowser: false,\n  acceptableFileType: '.jpg,.jpeg,.png',\n  inputId: 'draggableFileUploaderId'\n};\n\nexport default DragDropFileUpload;\n"],"mappings":"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"}