{"version":3,"file":"DragDropFileUpload.js","names":["defaultProps","defaultPropsMap","defaultPropTypes","DragDropFileUpload","setFile","openFileBrowser","setOpenFileBrowser","draggableElement","whileDraggingElement","multipleFileUploader","whileDraggingElementClassName","mainContainerClassName","inputRef","useRef","React","useState","dragActive","setDragActive","handleDrag","e","preventDefault","stopPropagation","type","handleDrop","dataTransfer","files","handleChange","target","useEffect","current","click","setTimeout","cx","propTypes","PropTypes","func","bool","string"],"sources":["../../../src/components/DragDropFileUpload/DragDropFileUpload.js"],"sourcesContent":["import React, { useRef, useEffect } from 'react';\nimport cx from 'classnames';\nimport PropTypes from 'prop-types';\n\nimport defaultPropsMap from 'Constants/defaultProps';\nconst { defaultProps, defaultPropTypes } = defaultPropsMap;\n\nfunction DragDropFileUpload({\n  setFile,\n  openFileBrowser,\n  setOpenFileBrowser,\n  draggableElement,\n  whileDraggingElement,\n  multipleFileUploader,\n  whileDraggingElementClassName,\n  mainContainerClassName\n}) {\n  const inputRef = useRef();\n\n  const [dragActive, setDragActive] = React.useState(false);\n\n  const handleDrag = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    if (e.type === 'dragenter' || e.type === 'dragover') {\n      setDragActive(true);\n    } else if (e.type === 'dragleave') {\n      setDragActive(false);\n    }\n  };\n\n  const handleDrop = function (e) {\n    e.preventDefault();\n    e.stopPropagation();\n    setDragActive(false);\n    if (e.dataTransfer.files && e.dataTransfer.files[0]) {\n      setFile(e.dataTransfer.files);\n    }\n  };\n\n  const handleChange = function (e) {\n    e.preventDefault();\n    if (e.target.files && e.target.files[0]) {\n      setFile(e.target.files);\n    }\n  };\n\n  useEffect(() => {\n    if (openFileBrowser) {\n      inputRef.current.click();\n      setTimeout(() => {\n        setOpenFileBrowser(false);\n      }, 500);\n    }\n  }, [openFileBrowser]);\n\n  return (\n    <>\n      <div\n        className={cx('pos-rel', mainContainerClassName)}\n        onDragEnter={handleDrag}\n        onSubmit={(e) => e.preventDefault()}>\n        <input\n          ref={inputRef}\n          type=\"file\"\n          className=\"no-display\"\n          multiple={multipleFileUploader}\n          onChange={handleChange}\n        />\n        {draggableElement && draggableElement()}\n        {dragActive && (\n          <div\n            className={cx(whileDraggingElementClassName)}\n            onDragEnter={handleDrag}\n            onDragLeave={handleDrag}\n            onDragOver={handleDrag}\n            onDrop={handleDrop}>\n            {whileDraggingElement && whileDraggingElement()}\n          </div>\n        )}\n      </div>\n    </>\n  );\n}\n\nDragDropFileUpload.propTypes = {\n  ...defaultPropTypes,\n  setFile: PropTypes.func,\n  openFileBrowser: PropTypes.bool,\n  setOpenFileBrowser: PropTypes.func,\n  draggableElement: PropTypes.func,\n  whileDraggingElement: PropTypes.func,\n  multipleFileUploader: PropTypes.bool,\n  whileDraggingElementClassName: PropTypes.string,\n  mainContainerClassName: PropTypes.string\n};\n\nDragDropFileUpload.defaultProps = {\n  ...defaultProps,\n  openFileBrowser: false\n};\n\nexport default DragDropFileUpload;\n"],"mappings":"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"}